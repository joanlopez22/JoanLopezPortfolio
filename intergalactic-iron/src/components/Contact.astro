---
import { Icon } from 'astro-icon/components';

const contactInfo = [
  {
    icon: "ri:mail-line",
    title: "Email",
    value: "hello@joanlopez.dev",
    link: "mailto:hello@joanlopez.dev",
  },
  {
    icon: "ri:phone-line",
    title: "Teléfono",
    value: "+34 612 345 678",
    link: "tel:+34612345678",
  },
  {
    icon: "ri:map-pin-line",
    title: "Ubicación",
    value: "Barcelona, España",
    link: "https://goo.gl/maps/sU1oQtC9XvZdCgxN7",
  },
  {
    icon: "ri:time-line",
    title: "Horario",
    value: "Lun - Vie: 9AM - 6PM",
    link: null,
  }
];
---

<section id="contacto" class="py-20 md:py-32 relative overflow-hidden">
  <!-- Decoración de fondo -->
  <div class="absolute -bottom-20 right-10 w-96 h-96 bg-primary/10 rounded-full blur-3xl"></div>
  <div class="absolute -top-20 -left-20 w-96 h-96 bg-primary/5 rounded-full blur-3xl"></div>
  
  <div class="container mx-auto px-4 md:px-8 relative z-10">
    <div class="text-center mb-16" data-aos="fade-down">
      <h2 class="text-sm text-primary uppercase tracking-widest font-mono mb-2">Hablemos</h2>
      <h3 class="text-3xl md:text-4xl font-bold mb-6">Ponte en <span class="gradient-text">Contacto</span></h3>
      <div class="w-20 h-1 bg-primary mx-auto rounded-full"></div>
    </div>
    
    <div class="grid lg:grid-cols-2 gap-12">
      <!-- Información de contacto -->
      <div data-aos="fade-right" data-aos-delay="100">
        <h4 class="text-2xl font-bold mb-6">¿Tienes un proyecto en mente?</h4>
        
        <p class="text-gray-300 mb-8 leading-relaxed">
          Estoy siempre abierto a nuevas oportunidades y colaboraciones. Si tienes un proyecto interesante o una idea que te gustaría discutir, no dudes en contactarme utilizando cualquiera de los siguientes medios.
        </p>
        
        <div class="space-y-6 mb-10">
          {contactInfo.map((item) => (
            <div class="flex items-start space-x-4" data-aos="fade-up">
              <div class="bg-primary/20 p-3 rounded-full">
                <Icon name={item.icon} class="w-6 h-6 text-primary" />
              </div>
              
              <div>
                <h5 class="text-light font-medium mb-1">{item.title}</h5>
                {item.link ? (
                  <a 
                    href={item.link} 
                    class="text-gray-400 hover:text-primary transition-colors duration-300"
                    target={item.link.startsWith('http') ? '_blank' : ''}
                    rel={item.link.startsWith('http') ? 'noopener noreferrer' : ''}
                  >
                    {item.value}
                  </a>
                ) : (
                  <p class="text-gray-400">{item.value}</p>
                )}
              </div>
            </div>
          ))}
        </div>
        
        <!-- Redes sociales -->
        <h5 class="text-xl font-bold mb-4">Sígueme en</h5>
        <div class="flex space-x-4">
          <a 
            href="https://github.com/joanlopez" 
            target="_blank" 
            rel="noopener noreferrer"
            class="bg-dark/50 hover:bg-primary/90 text-light hover:text-white p-3 rounded-full transition-colors duration-300"
            aria-label="GitHub"
          >
            <Icon name="simple-icons:github" class="w-6 h-6" />
          </a>
          <a 
            href="https://linkedin.com/in/joanlopezramirez" 
            target="_blank" 
            rel="noopener noreferrer"
            class="bg-dark/50 hover:bg-primary/90 text-light hover:text-white p-3 rounded-full transition-colors duration-300"
            aria-label="LinkedIn"
          >
            <Icon name="simple-icons:linkedin" class="w-6 h-6" />
          </a>
          <a 
            href="https://twitter.com/joanlopezdev" 
            target="_blank" 
            rel="noopener noreferrer"
            class="bg-dark/50 hover:bg-primary/90 text-light hover:text-white p-3 rounded-full transition-colors duration-300"
            aria-label="Twitter"
          >
            <Icon name="simple-icons:twitter" class="w-6 h-6" />
          </a>
          <a 
            href="https://instagram.com/joanlopezdev" 
            target="_blank" 
            rel="noopener noreferrer"
            class="bg-dark/50 hover:bg-primary/90 text-light hover:text-white p-3 rounded-full transition-colors duration-300"
            aria-label="Instagram"
          >
            <Icon name="simple-icons:instagram" class="w-6 h-6" />
          </a>
        </div>
      </div>
      
      <!-- Formulario de contacto -->
      <div 
        class="relative bg-dark/50 p-8 rounded-2xl border border-primary/20 shadow-xl"
        data-aos="fade-left"
        data-aos-delay="200"
      >
        <!-- Elementos decorativos -->
        <div class="absolute -top-3 -right-3 w-6 h-6 bg-primary/80 rounded-full"></div>
        <div class="absolute -bottom-3 -left-3 w-6 h-6 bg-primary/80 rounded-full"></div>
        
        <h4 class="text-2xl font-bold mb-6">Envíame un mensaje</h4>
        
        <form id="contact-form" class="space-y-5">
          <div class="grid md:grid-cols-2 gap-5">
            <div class="form-group">
              <label for="name" class="text-light block mb-2">Nombre</label>
              <input 
                type="text" 
                id="name" 
                name="name" 
                required
                class="w-full bg-dark/50 text-light border border-primary/30 rounded-lg p-3 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors duration-300"
                placeholder="Tu nombre"
              />
            </div>
            <div class="form-group">
              <label for="email" class="text-light block mb-2">Email</label>
              <input 
                type="email" 
                id="email" 
                name="email" 
                required
                class="w-full bg-dark/50 text-light border border-primary/30 rounded-lg p-3 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors duration-300"
                placeholder="tu@email.com"
              />
            </div>
          </div>
          
          <div class="form-group">
            <label for="subject" class="text-light block mb-2">Asunto</label>
            <input 
              type="text" 
              id="subject" 
              name="subject" 
              required
              class="w-full bg-dark/50 text-light border border-primary/30 rounded-lg p-3 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors duration-300"
              placeholder="¿De qué se trata?"
            />
          </div>
          
          <div class="form-group">
            <label for="message" class="text-light block mb-2">Mensaje</label>
            <textarea 
              id="message" 
              name="message" 
              rows="5" 
              required
              class="w-full bg-dark/50 text-light border border-primary/30 rounded-lg p-3 focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary transition-colors duration-300 resize-none"
              placeholder="Escribe tu mensaje aquí..."
            ></textarea>
          </div>
          
          <button 
            type="submit"
            class="w-full bg-primary hover:bg-primary/90 text-white py-3 px-6 rounded-lg font-medium transition-all duration-300 hover:shadow-lg hover:shadow-primary/30 flex items-center justify-center group"
          >
            <span>Enviar mensaje</span>
            <Icon name="ri:send-plane-line" class="w-5 h-5 ml-2 transform group-hover:translate-x-1 transition-transform duration-300" />
          </button>
        </form>
        
        <!-- Mensaje de éxito/error -->
        <div id="form-status" class="mt-5 hidden">
          <div id="success-message" class="bg-green-600/20 border border-green-600/30 text-green-500 p-4 rounded-lg hidden">
            ¡Mensaje enviado con éxito! Te responderé lo antes posible.
          </div>
          <div id="error-message" class="bg-red-600/20 border border-red-600/30 text-red-500 p-4 rounded-lg hidden">
            Ha ocurrido un error al enviar el mensaje. Por favor, inténtalo de nuevo.
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const form = document.getElementById('contact-form');
    const formStatus = document.getElementById('form-status');
    const successMessage = document.getElementById('success-message');
    const errorMessage = document.getElementById('error-message');
    
    if (form) {
      form.addEventListener('submit', async (e) => {
        e.preventDefault();
        
        // En un entorno real, aquí enviarías el formulario a tu backend
        try {
          // Simulamos el envío con un timeout
          await new Promise(resolve => setTimeout(resolve, 1500));
          
          // Mostrar mensaje de éxito
          formStatus.classList.remove('hidden');
          successMessage.classList.remove('hidden');
          errorMessage.classList.add('hidden');
          
          // Resetear el formulario
          form.reset();
          
          // Ocultar el mensaje después de 5 segundos
          setTimeout(() => {
            formStatus.classList.add('hidden');
            successMessage.classList.add('hidden');
          }, 5000);
          
        } catch (error) {
          // Mostrar mensaje de error
          formStatus.classList.remove('hidden');
          errorMessage.classList.remove('hidden');
          successMessage.classList.add('hidden');
          
          // Ocultar el mensaje después de 5 segundos
          setTimeout(() => {
            formStatus.classList.add('hidden');
            errorMessage.classList.add('hidden');
          }, 5000);
        }
      });
    }
  });
</script> 